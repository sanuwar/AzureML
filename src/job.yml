$schema: https://azuremlschemas.azureedge.net/latest/commandJob.schema.json

code: .

type: command
name: diabetes-logreg-dev
display_name: Diabetes Logistic Regression (Dev)
experiment_name: diabetes-logreg
description: Train logistic regression with MLflow autologging


command: >
  python model/train.py
  --training_data ${{inputs.training_data}}
  --reg_rate ${{inputs.reg_rate}}

# Pick ONE of these env forms (both avoid @latest):
# A) Robust: explicit Docker image (official Microsoft image)
environment:
  image: mcr.microsoft.com/azureml/sklearn-0.24-ubuntu18.04-py37-cpu:latest
# B) Or curated registry URL pinned to a version:
# environment: azureml://registries/azureml/environments/AzureML-sklearn-0.24-ubuntu18.04-py37-cpu/versions/1

compute: azureml:cpu-cluster

inputs:
  training_data:
    type: uri_folder
    path: ../experimentation/data     # from src/ → repo root → experimentation/data
  reg_rate:
    type: number
    default: 0.1
